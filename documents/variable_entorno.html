<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guía de Variables de Entorno (.env)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8f9fa; }
        .card { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06); }
        h2 { border-bottom: 2px solid #eef2ff; padding-bottom: 0.5rem; }
        th, td { padding: 0.75rem 1rem; text-align: left; border-bottom: 1px solid #f3f4f6; }
        th { background-color: #f5f3ff; font-weight: 600; }
        code { background-color: #f3f4f6; padding: 0.1rem 0.4rem; border-radius: 0.3rem; font-weight: 500; }
    </style>
</head>
<body class="p-4 sm:p-8">
    <div class="max-w-4xl mx-auto bg-white p-6 sm:p-10 rounded-xl card">
        <header class="mb-8 border-b pb-4">
            <h1 class="text-3xl font-bold text-gray-900 flex items-center mb-1">
                <i data-lucide="settings" class="w-6 h-6 mr-3 text-purple-600"></i>
                Guía de Variables de Entorno (Archivo `.env`)
            </h1>
            <p class="text-gray-500">Clasificación y propósito de todas las variables de configuración del ecosistema.</p>
        </header>

        <nav class="mb-8 p-4 bg-purple-50 rounded-lg text-sm">
            <h3 class="font-semibold text-purple-700 mb-2">Contenidos</h3>
            <ul class="list-none space-y-1">
                <li><a href="#db" class="hover:text-purple-600">1. Variables de Persistencia (MySQL)</a></li>
                <li><a href="#conectividad" class="hover:text-purple-600">2. Variables de Conectividad y URLs</a></li>
                <li><a href="#auth" class="hover:text-purple-600">3. Variables de Autenticación (API Keys)</a></li>
                <li><a href="#entorno" class="hover:text-purple-600">4. Variables de Configuración de Entorno</a></li>
            </ul>
        </nav>

        <section id="db" class="mb-8">
            <h2 class="text-2xl font-semibold text-purple-800 mb-4">1. Variables de Persistencia de Datos (MySQL)</h2>
            <div class="overflow-x-auto">
                <table class="min-w-full">
                    <thead>
                        <tr><th>Variable</th><th>Uso Principal</th><th>Propósito</th></tr>
                    </thead>
                    <tbody>
                        <tr><td><code>MYSQL_HOST</code></td><td><code>docker-compose.yml</code></td><td>Hostname de la DB: <code>mysql_db</code> (nombre del servicio Docker).</td></tr>
                        <tr><td><code>MYSQL_USER</code></td><td>Microservicios</td><td>Usuario estándar para la conexión de la aplicación.</td></tr>
                        <tr><td><code>MYSQL_PASSWORD</code></td><td>Microservicios</td><td>Contraseña del usuario estándar.</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="conectividad" class="mb-8">
            <h2 class="text-2xl font-semibold text-purple-800 mb-4">2. Variables de Conectividad y URLs</h2>
            <div class="overflow-x-auto">
                <table class="min-w-full">
                    <thead>
                        <tr><th>Variable</th><th>Consumidor Principal</th><th>Propósito</th></tr>
                    </thead>
                    <tbody>
                        <tr><td><code>PRODUCTS_SERVICE_PORT_HOST</code></td><td><code>docker-compose.yml</code></td><td>Puerto expuesto al host (<code>localhost:8001</code>).</td></tr>
                        <tr><td><code>INVENTORY_SERVICE_PORT_HOST</code></td><td><code>docker-compose.yml</code></td><td>Puerto expuesto al host (<code>localhost:8000</code>) (Conexión del Frontend).</td></tr>
                        <tr><td><code>PRODUCTS_SERVICE_URL_INTERNAL</code></td><td><code>inventory-service</code></td><td>**CRÍTICA:** URL interna para llamadas síncronas (ej. <code>http://products-service:3000</code>).</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="auth" class="mb-8">
            <h2 class="text-2xl font-semibold text-purple-800 mb-4">3. Variables de Autenticación (API Keys)</h2>
            <div class="overflow-x-auto">
                <table class="min-w-full">
                    <thead>
                        <tr><th>Variable</th><th>Consumidor Principal</th><th>Propósito</th></tr>
                    </thead>
                    <tbody>
                        <tr><td><code>PRODUCTS_API_KEY</code></td><td>Products (Receptor) / Inventory (Emisor)</td><td>Clave que Products espera en el Header <code>X-API-Key</code>.</td></tr>
                        <tr><td><code>FRONTEND_API_KEY</code></td><td>Frontend (Opcional)</td><td>Clave para autenticación simple desde la aplicación web.</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="entorno" class="mb-8">
            <h2 class="text-2xl font-semibold text-purple-800 mb-4">4. Variables de Configuración de Entorno</h2>
            <ul class="list-disc list-inside ml-4 space-y-2 text-gray-700">
                <li><code>NODE_ENV</code>: Define el entorno de ejecución de Node.js (ej. <code>development</code>).</li>
                <li><code>FLASK_ENV</code>: Define el entorno de ejecución de Flask (ej. <code>development</code>).</li>
            </ul>
        </section>
    </div>
    <script>lucide.createIcons();</script>
</body>
</html>